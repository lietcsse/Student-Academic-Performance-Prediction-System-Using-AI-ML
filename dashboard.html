
<!doctype html>

<html lang="en">

<head>

<meta charset="UTF-8">

<title>Questions</title>

<link rel="stylesheet" href="dash.css">

</head>

<body> <!-- partial:index.partial.html -->

<section> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
<div class="signin">
<div class="content">
<h2 style="text-align: center;">Q.2] How many hours do you study?</h2>
<div class="form" style="display: flex; justify-content: center;">
<div class="inputBox">
<input type="number" id="study-hours" min="0" max="10" step="1"
placeholder="Enter hours (0-10)"
style="padding: 10px; font-size: 18px; background-color: white;
border: 2px solid chartreuse; width: 40%; color: black;
text-align: center; border-radius: 5px; display: block; margin: auto;">
</div>
</div>
</div>
</div>

</div>






<!-- Q.2 -->

<div class="signin1">

<div class="content1">

<h2>Q.1] what is your learning style ? </h2>
<!-- <label> Short Description on learning style </label> -->

<div class="form1">

<div class="inputBox1">

<input type="text" list="learning-styles" id="learning-style" required>
<datalist id="learning-styles">

<option value="Visual learner"> (learn best through pictures , graph diagram)</option>
<option value="Auditory learners"> (learn best through listening lectures and explanations)</option>
<option value="kinesthetic learners"> (learn best through physical activities)</option>
<option value="Read/Write learners"> (learn best through by reading or writing notes)</option>
<option value="Logic learners"> (learn best through patterns,logic and problem solving)</option>
<option value="Social learners">(learn best through interaction and collabrations )</option>
<option value="Solitary learners"> (prefer to learn alone,focusing on own pace and interest )</option>

</datalist>
</div>


</div>

</div>

</div>
<!-- Q2 -->

<!-- Q5 -->
<div class="signin4">
<div class="content4">
<h2 style="text-align: center;">Q.3] How much is your screen time?</h2>
<div class="form4" style="display: flex; justify-content: center;">
<div class="inputBox4">
<input type="number" id="screen-time" min="0" max="10" step="1"
placeholder="Enter hours (0-10)"
style="padding: 10px; font-size: 18px; background-color: white;
border: 2px solid chartreuse; width: 40%; color: black;
text-align: center; border-radius: 5px; display: block; margin: auto;">
</div>
</div>
</div>
</div>

<!-- Q5 -->

<!-- Q6 -->
<div class="signin5">
<div class="content5">
<h2 style="text-align: center;">Q.4] How much are your sleeping hours?</h2>
<div class="form5" style="display: flex; justify-content: center;">
<div class="inputBox5">
<input type="number" id="sleep-hours" min="0" max="10" step="1"
placeholder="Enter hours (0-10)"
style="padding: 10px; font-size: 18px; background-color: white;
border: 2px solid chartreuse; width: 40%; color: black;
text-align: center; border-radius: 5px; display: block; margin: auto;">
</div>
</div>
</div>
</div>

<!-- Q6 -->
<!-- Q3 -->
<div class="signin2" style="width: 100%; background: #222; z-index: 1000; display: flex; justify-content: center; align-items: center; padding: 20px; border-radius: 4px; box-shadow: 0 15px 35px rgba(0,0,0,9); flex-direction: column; margin-bottom: 30px;">
<div class="content2" style="display: flex; flex-direction: column; align-items: center; gap: 20px;">
<h2 style="font-size: 2em; color: #0f0; text-transform: capitalize;">Q.5] What is your current engineering semester?</h2>
<div class="form2" style="display: flex; flex-direction: column; gap: 25px;">
<div class="inputBox2" style="position: relative; width: 100%;">
<input list="study1" id="current-sem" style="width: 100%; background: #333; border: none; outline: none; padding: 12px; border-radius: 4px; color: #0f0; font-weight: 500; font-size: 1em;">
<datalist id="study1">
<option value="1">First Semester</option>
<option value="2">Second Semester</option>
<option value="3">Third Semester</option>
<option value="4">Fourth Semester</option>
<option value="5">Fifth Semester</option>
<option value="6">Sixth Semester</option>
<option value="7">Seventh Semester</option>
<option value="8">Eighth Semester</option>
</datalist>
</div>
</div>
</div>
</div>

<!-- Q4 -->
<div class="signin3" style="width: 100%; background: #222; z-index: 1000; display: flex; justify-content: center; align-items: center; padding: 20px; border-radius: 4px; box-shadow: 0 15px 35px rgba(0,0,0,9); flex-direction: column; margin-top: 30px;">
<div class="content3" style="display: flex; flex-direction: column; align-items: flex-start; gap: 20px;">
<h2 style="text-align: left; font-size: 2em; color: #0f0; text-transform: capitalize;">Q.6] Do you currently have any previous semester backlogs?</h2>
<div class="form3" style="display: flex; flex-direction: column; align-items: flex-start; margin-top: 15px;">
<label style="color: #0f0; font-size: 22px; display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
<input type="checkbox" class="prev-kt" id="prev-kt-yes" value="Yes" style="width: 20px; height: 20px; cursor: pointer;">
Yes, I have backlogs from previous semesters
</label>
<label style="color: #0f0; font-size: 22px; display: flex; align-items: center; gap: 10px;">
<input type="checkbox" class="prev-kt" id="prev-kt-no" value="No" style="width: 20px; height: 20px; cursor: pointer;">
No, I don't have any backlogs from previous semesters
</label>
</div>
</div>
</div>


<!-- submit button -->

<div class="signin7"> -

<div class="content7">

<div class="form7">

<div class="inputBox7">

<a href="">
<input type="submit" value="SUBMIT" id="submit-button">
</a>

</div>

</div>

</div>

</div>

<!-- submit button -->

</section>
<script type="module">
// Import the functions you need from the SDKs you need
// Import the functions you need from the SDKs you need
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-analytics.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-auth.js";
import { getFirestore, collection, setDoc, doc, updateDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore.js";


const firebaseConfig = {
  apiKey: "AIzaSyDuDxckSsWSJI3nsIpESKSfmdBNnRId0-w", // Replace with your actual API key
  authDomain: "student-performance-de2c7.firebaseapp.com",
  projectId: "student-performance-de2c7",
  storageBucket: "student-performance-de2c7.firebasestorage.app",
  messagingSenderId: "387224762479",
  appId: "1:387224762479:web:723bc6d63e9373a83df59a",
  measurementId: "G-QYYEDCDY7Z"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
const auth = getAuth();
const db = getFirestore(app);

const submitForm = async () => {
  event.preventDefault();
  const user = auth.currentUser;

  if (!user) {
    console.error("No user signed in");
    alert("You must be signed in to submit data.");
    return;
  }

  const studyHours = parseInt(document.getElementById('study-hours').value, 10) || 0; // Handle empty input
  const learningStyle = document.getElementById('learning-style').value || "Unspecified"; //Handle empty input
  const screenTime = parseInt(document.getElementById('screen-time').value, 10) || 0; // Handle empty input
  const sleepingHours = parseInt(document.getElementById('sleep-hours').value, 10) || 0; //Handle empty input
  const semester = parseInt(document.getElementById('current-sem').value, 10) || 0; // Handle empty input
  const previousKtsYes = document.getElementById('prev-kt-yes').checked;
  const previousKtsNo = document.getElementById('prev-kt-no').checked;

  let previousKts = '';
  if (previousKtsYes) {
    previousKts = 'Yes';
  } else if (previousKtsNo) {
    previousKts = 'No';
  } else {
    alert('Please select whether you have previous semester backlogs.');
    return;
  }

  try {
    const userDocRef = doc(db, 'users', user.uid);
    const docSnap = await getDoc(userDocRef);

    if (docSnap.exists()) {
      // Document exists, update it
      await updateDoc(userDocRef, {
        studyHours: studyHours,
        learningStyle: learningStyle,
        screenTime: screenTime,
        sleepingHours: sleepingHours,
        semester: semester,
        previousKts: previousKts
      });
    } else {
      // Document doesn't exist, create it
      await setDoc(userDocRef, {
        studyHours: studyHours,
        learningStyle: learningStyle,
        screenTime: screenTime,
        sleepingHours: sleepingHours,
        semester: semester,
        previousKts: previousKts,
        uid: user.uid //Add UID for easy retrieval.
      });
    }

    if (previousKts === 'Yes') {
      window.location.href = "kt.html";
    } else if (previousKts === 'No') {
      window.location.href = "NonKT.html";
    } else {
      alert('Form submitted successfully!');
    }
  } catch (error) {
    console.error('Error submitting form:', error);
    alert('Error submitting form: ' + error.message);
  }
};


// Add an event listener to update the slider value display
const ScreenTimeSlider = document.getElementById('screen-time');
const ScreenTimeValue = document.getElementById('screen-time-value');
const SleepHourSlider = document.getElementById('sleep-hours');
const SleepHourValue = document.getElementById('sleep-hours-value');
const studyHoursSlider = document.getElementById('study-hours');
const studyHoursValue = document.getElementById('study-hours-value');

SleepHourSlider.addEventListener('change', function() {
// Update the value display

SleepHourValue.textContent = this.value;

});

ScreenTimeSlider.addEventListener('change', function() {
// Update the value display

ScreenTimeValue.textContent = this.value;
});

studyHoursSlider.addEventListener('change', function() {
// Update the value display
studyHoursValue.textContent = this.value;

});



// Add event listeners to checkboxes to ensure only one can be selected
const prevKtCheckboxes = document.querySelectorAll('.prev-kt');
prevKtCheckboxes.forEach(checkbox => {
checkbox.addEventListener('change', function() {
if (this.checked) {
prevKtCheckboxes.forEach(otherCheckbox => {
if (otherCheckbox !== this) {
otherCheckbox.checked = false;
}
});
}
});
});



onAuthStateChanged(auth, (user) => {
if (user) {
// User is signed in, get the user ID
const userId = user.uid;

// Add event listener to submit button
document.getElementById('submit-button').addEventListener('click', () => {
// Call function to submit form with user ID
submitForm();
});
} else {
// No user is signed in
console.log("No user signed in");
}
});

</script>
</body>
</html>